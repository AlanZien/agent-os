# Production Environment Configuration
# Copy this file to .env.prod and fill in your actual values
# NEVER commit .env.prod with real credentials
# Store production secrets in a secure secrets manager (e.g., AWS Secrets Manager, Vault)

# Environment
ENV=prod
NODE_ENV=production

# ============================================================================
# DATABASE (Supabase Pro)
# ============================================================================

DATABASE_URL=postgresql://postgres:[YOUR_PROD_PASSWORD]@db.[YOUR_PROD_PROJECT_REF].supabase.co:5432/postgres
SUPABASE_URL=https://[YOUR_PROD_PROJECT_REF].supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.[YOUR_PROD_ANON_KEY]
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.[YOUR_PROD_SERVICE_KEY]

# Database Connection Pool (production tuning)
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30

# ============================================================================
# API CONFIGURATION
# ============================================================================

API_URL=https://api.yourproject.com
API_PORT=8000
FRONTEND_URL=https://yourproject.com

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# CRITICAL: Use STRONG secrets in production
# Generate with: openssl rand -base64 64
JWT_SECRET=[GENERATE_ULTRA_STRONG_SECRET_MIN_64_CHARS]
SESSION_SECRET=[GENERATE_ULTRA_STRONG_SECRET_MIN_64_CHARS]

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600  # 1 hour
REFRESH_TOKEN_EXPIRATION=2592000  # 30 days

# CORS (strict in production)
ALLOWED_ORIGINS=https://yourproject.com,https://www.yourproject.com,https://api.yourproject.com

# Password Requirements (strict)
MIN_PASSWORD_LENGTH=12
REQUIRE_SPECIAL_CHARS=true
REQUIRE_NUMBERS=true
REQUIRE_UPPERCASE=true

# Account Security
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=1800  # 30 minutes
ENABLE_2FA=true

# ============================================================================
# THIRD-PARTY SERVICES
# ============================================================================

# Notion Integration (production workspace)
NOTION_API_KEY=[YOUR_PROD_NOTION_API_KEY]
NOTION_DATABASE_ID=[YOUR_PROD_NOTION_DATABASE_ID]

# Email Service (production)
SENDGRID_API_KEY=[YOUR_PROD_SENDGRID_KEY]
FROM_EMAIL=noreply@yourproject.com
SUPPORT_EMAIL=support@yourproject.com

# File Storage (production)
STORAGE_BUCKET=prod-uploads
MAX_FILE_SIZE=52428800  # 50MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx

# ============================================================================
# LOGGING & DEBUGGING
# ============================================================================

LOG_LEVEL=warn  # Only warnings and errors in production
DEBUG=false
VERBOSE_LOGGING=false

# Structured Logging
LOG_FORMAT=json
LOG_TIMESTAMP=true

# Log Aggregation (REQUIRED for production)
LOGTAIL_SOURCE_TOKEN=[YOUR_PROD_LOGTAIL_TOKEN]

# ============================================================================
# MONITORING & ERROR TRACKING (REQUIRED)
# ============================================================================

# Sentry (Error tracking)
SENTRY_DSN=[YOUR_PROD_SENTRY_DSN]
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% of transactions
SENTRY_RELEASE=[YOUR_APP_VERSION]

# Application Performance Monitoring
NEW_RELIC_LICENSE_KEY=[YOUR_PROD_NEW_RELIC_KEY]
NEW_RELIC_APP_NAME=yourproject-production

# Uptime Monitoring
# PINGDOM_CHECK_ID=[YOUR_PINGDOM_CHECK]
# UPTIMEROBOT_API_KEY=[YOUR_UPTIMEROBOT_KEY]

# ============================================================================
# FEATURE FLAGS (Production)
# ============================================================================

ENABLE_EXPERIMENTAL_FEATURES=false  # NEVER in production
ENABLE_DEBUG_ROUTES=false  # NEVER in production
ENABLE_MOCK_DATA=false  # NEVER in production
MAINTENANCE_MODE=false

# ============================================================================
# SSL/TLS (REQUIRED)
# ============================================================================

FORCE_HTTPS=true
HTTPS_REDIRECT=true
HSTS_MAX_AGE=31536000  # 1 year
HSTS_INCLUDE_SUBDOMAINS=true

# ============================================================================
# RATE LIMITING (STRICT)
# ============================================================================

RATE_LIMIT_WINDOW=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=60  # Stricter than staging

# API Rate Limiting
API_RATE_LIMIT_WINDOW=60000  # 1 minute
API_RATE_LIMIT_MAX_REQUESTS=30

# ============================================================================
# CACHING
# ============================================================================

# Redis (REQUIRED for production)
REDIS_URL=[YOUR_PROD_REDIS_URL]
REDIS_TTL=3600  # 1 hour default

# CDN (if using)
# CDN_URL=https://cdn.yourproject.com

# ============================================================================
# PAYMENTS (if applicable)
# ============================================================================

# Stripe (LIVE mode)
STRIPE_SECRET_KEY=sk_live_[YOUR_PROD_STRIPE_KEY]
STRIPE_PUBLISHABLE_KEY=pk_live_[YOUR_PROD_STRIPE_KEY]
STRIPE_WEBHOOK_SECRET=whsec_[YOUR_PROD_WEBHOOK_SECRET]

# ============================================================================
# BACKUP & DISASTER RECOVERY
# ============================================================================

# Automated Backups (REQUIRED)
AUTO_BACKUP_ENABLED=true
BACKUP_FREQUENCY=daily
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_LOCATION=s3://your-backup-bucket

# Point-in-Time Recovery
ENABLE_PITR=true

# ============================================================================
# COMPLIANCE & DATA PROTECTION
# ============================================================================

# GDPR Compliance
ENABLE_GDPR_MODE=true
DATA_RETENTION_DAYS=365

# Data Encryption
ENCRYPTION_KEY=[YOUR_PROD_ENCRYPTION_KEY_32_BYTES]
ENCRYPT_AT_REST=true

# ============================================================================
# PERFORMANCE OPTIMIZATION
# ============================================================================

# Database Query Optimization
ENABLE_QUERY_CACHE=true
QUERY_CACHE_TTL=300  # 5 minutes

# Static Asset Optimization
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# ============================================================================
# ALERTING
# ============================================================================

# Critical Alerts (SMS + Email + Slack)
ALERT_EMAIL=alerts@yourproject.com
ALERT_PHONE=+1234567890
SLACK_WEBHOOK_URL=[YOUR_SLACK_WEBHOOK]

# Alert Thresholds
CPU_ALERT_THRESHOLD=80  # percentage
MEMORY_ALERT_THRESHOLD=85  # percentage
ERROR_RATE_THRESHOLD=1  # percentage
RESPONSE_TIME_THRESHOLD=2000  # milliseconds

# ============================================================================
# ANALYTICS (if applicable)
# ============================================================================

# Google Analytics
# GA_TRACKING_ID=G-[YOUR_GA_ID]

# PostHog (Product Analytics)
# POSTHOG_API_KEY=[YOUR_POSTHOG_KEY]
# POSTHOG_HOST=https://app.posthog.com

# ============================================================================
# SECURITY HEADERS
# ============================================================================

# Content Security Policy
CSP_ENABLED=true
CSP_DIRECTIVES=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'

# Additional Security Headers
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin

# ============================================================================
# NOTES
# ============================================================================

# Production Checklist:
# [ ] All secrets are stored in secure secrets manager
# [ ] Database backups are configured and tested
# [ ] Monitoring and alerting are set up
# [ ] SSL certificates are valid and auto-renewing
# [ ] Rate limiting is configured
# [ ] Error tracking (Sentry) is enabled
# [ ] Logging aggregation is enabled
# [ ] Redis is configured for caching
# [ ] Performance monitoring is active
# [ ] Disaster recovery plan is documented
# [ ] Security headers are enabled
# [ ] GDPR compliance is enabled (if applicable)
# [ ] All third-party services are using production credentials
# [ ] Feature flags are set to production values
# [ ] Debug/experimental features are disabled
